version: "3.2"
services:
  arena-backend: 
    build: 
        context: ../
        dockerfile: ./realestate/realestate-backend/Dockerfile.${ENV_NAME}
    ports:
      - "1312:8080"
      - "9001:9001"
    volumes:
      - ./realestate-backend:/backend-src
      - ./realestate:/images
    working_dir: /backend-src
    command: ./start-db.sh ${ENV_NAME}
    networks:
      arena_net:
        ipv4_address: 192.169.2.2
  arena-frontend:
    build: 
        context: ./realestate-frontend/
        dockerfile: Dockerfile.${ENV_NAME}
    command: /frontend/start-frontend.sh ${ENV_NAME}
    ports:
      - "${FRONTEND_PORT}:3000"
    volumes:
      - ../arena-frontend:/arena-frontend
      - ./realestate-frontend/:/frontend
      - ./realestate:/frontend/public/images
    working_dir: /frontend
    networks:
      arena_net:
        ipv4_address: 192.169.2.1
    stdin_open: true
networks:
  arena_net:
      ipam:
          driver: default
          config:
              - subnet: 192.169.0.0/16
